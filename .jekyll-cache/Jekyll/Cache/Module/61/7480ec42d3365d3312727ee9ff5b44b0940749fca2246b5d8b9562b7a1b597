I"Ú0





<article id="post-maui_net-maui-creando-un-boton-de-conteo-regresivo-maiu" class="page post mb6" role="article">
  <header>
    <h1 class="post-title flip-project-title">
      
        Creando un boton de conteo regresivo en .NET MAUI
      
    </h1>

    <div class="post-date">
      <span>
        
          
          <time datetime="2022-08-12T00:00:00-05:00">12 Aug 2022</time>
        
        
        
        
        
        









in <span>Maui_net</span> / <a href="/maui/" class="flip-title">MAUI</a>

        









on <span>Maui</span>, <span>Net</span>

      </span>
      
        
          
          
          
        
      
    </div>
    
    
      
        <div class="img-wrapper lead aspect-ratio sixteen-nine flip-project-img">
          


<img
  
    src="/assets/img/blog/post-headers/maui/Integrate-biometric.png"
  
  alt="Creando un boton de conteo regresivo en .NET MAUI"
  
  
  width="864"
  height="486"
  loading="lazy"
/>

        </div>
      
      
    

    



  
    <p class="note-sm" >
      En este art√≠culo veremos que tan f√°cilmente es crear un bot√≥n de cuenta regresiva en .NET MAUI

    </p>
  


  </header>

  
    <p>Tal vez sea la vejez o simplemente la falta de atenci√≥n, pero me he sentido mucho menos flexible en el pasado, as√≠ que hice lo que har√≠a cualquier desarrollador de aplicaciones. Vaya a la tienda de aplicaciones y busque una aplicaci√≥n que pueda ayudar. No solo encontr√© una aplicaci√≥n que mejor√≥ dr√°sticamente mi flexibilidad debido a una rutina de estiramiento enfocada en mis puntos d√©biles, sino que tambi√©n ten√≠a un control de bot√≥n de cuenta regresiva ordenado. Y dado que es UI julio, esta es una publicaci√≥n para dicho evento comunitario. Echemos un vistazo a c√≥mo podemos crear dicho control.</p>

<p>Tal vez te est√©s preguntando: ¬øQu√© es este control de bot√≥n de cuenta regresiva del que hablas? - Bueno, gracias por preguntar. El control comienza al 100%. Mientras los segundos cuentan hacia atr√°s, el c√≠rculo alrededor del control se reduce a medida que pasa el tiempo.</p>

<p>Bot√≥n de progreso que muestra los segundos restantes y un anillo de progreso decreciente.</p>

<p>Como ya habr√°s pensado. Este es el momento en que est√°s haciendo un estiramiento. Entonces, ¬øc√≥mo podemos implementar dicho control en .NET MAUI?</p>

<p>El d√≠a de hoy veremos como integrar la autenticaci√≥n biom√©trica en un proyecto .NET MAUI, asi que comencemos.</p>

<h3 id="el-bot√≥n-redondo">El bot√≥n redondo</h3>

<p>Comencemos con los bits f√°ciles, un control de bot√≥n redondo:</p>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/01.png" alt="image" /></p>

<h3 id="implementaci√≥n---android">Implementaci√≥n - Android</h3>

<p>Ahora lo que se debe de hacer es establecer la versi√≥n del SDK de destino. La versi√≥n del SDK de destino debe ser &gt;= 6.0. Por mi parte y si es posible, recomiendo usar siempre la √∫ltima versi√≥n estable del SDK. Puede establecer la versi√≥n del SDK de destino en las propiedades del proyecto de Android.</p>

<h4 id="instalar-la-migraci√≥n-de-android-x">Instalar la migraci√≥n de Android X</h4>

<p>Desde la versi√≥n 2, el plugin antes mencionado usa Android X. Por ende se debe instalar Xamarin.AndroidX.Migration en nuestro proyecto de Android.</p>

<h3 id="solicita-el-permiso-en-androidmanifestxml">Solicita el permiso en AndroidManifest.xml</h3>

<p>Acto seguido, deberemos de agregar el permiso en el archivo AndroidManifest.xml</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;uses-permission android:name<span class="o">=</span><span class="s2">"android.permission.USE_FINGERPRINT"</span> /&gt;

</code></pre></div></div>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/02.png" alt="image" /></p>

<p>Ya para terminar en Android, en el archivo MainActivity.cs a√±adamos el using correspondiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
using Plugin.Fingerprint<span class="p">;</span>

</code></pre></div></div>

<p>Posteriormente en el mismo archivo, a√±adamos el m√©todo OnCreate(), en el cual recordemos se ejecuta la l√≥gica de arranque b√°sica de la aplicaci√≥n que debe ocurrir una sola vez en toda la vida de la actividad. Aqui agregaremos la siguiente linea de c√≥digo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
CrossFingerprint.SetCurrentActivityResolver<span class="o">(()</span> <span class="o">=&gt;</span> this<span class="o">)</span><span class="p">;</span>

</code></pre></div></div>

<p>Nuestro archivo quedar√° de la siguiente manera:</p>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/img02.png" alt="image" /></p>

<h3 id="implementaci√≥n---ios">Implementaci√≥n - iOS</h3>

<p>En iOS es m√°s sencillo, solo se debe de agregar el ‚ÄúNSFaceIDUsageDescription‚Äù al archivo Info.plist para describir la raz√≥n por la que nuestra aplicaci√≥n usar√° Face ID. (<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW75">ver Documentaci√≥n</a>). De lo contrario, la aplicaci√≥n se bloquear√° cuando inicie una autenticaci√≥n de Face ID en iOS 11.3+.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;key&gt;NSFaceIDUsageDescription&lt;/key&gt;
&lt;string&gt;Need your face to unlock magic things&lt;/string&gt;

</code></pre></div></div>

<p>Nota: Si tienen alguna duda de como implementar esto, les recomiendo que sigan la gu√≠a en GitHub para saber mas sobre c√≥mo configurarlo para su proyecto .NET MAUI. Cabe mencionar que la gu√≠a se encuentra actualmente en la rama de soporte de maui, por lo que si el enlace no funciona, ya se ha fusionado y puede usar el enlace proporcionado anteriormente.</p>

<h3 id="mauiprogramcs">MauiProgram.cs</h3>

<p>Ya por √∫ltimo y antes de irnos a modificar nuestro XAML y a√±adir la funcionalidad principal, en el archivo MauiProgram.cs deberemos de agregar las siguiente lineas:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
    builder.Services.AddSingleton&lt;MainPage&gt;<span class="o">()</span><span class="p">;</span>
	builder.Services.AddSingleton<span class="o">(</span>typeof<span class="o">(</span>IFingerprint<span class="o">)</span>, CrossFingerprint.Current<span class="o">)</span><span class="p">;</span>

</code></pre></div></div>

<p>Quedando de la siguiente manera:</p>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/img021.png" alt="image" /></p>

<h3 id="xaml">XAML</h3>

<p>A continuaci√≥n agreguemos un bot√≥n con un controlador de clic (o modifiquemos el que nos cre√≥ la soluci√≥n si el proyecto es nuevo):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&lt;Button 
                <span class="nv">Text</span><span class="o">=</span><span class="s2">"Authenticate"</span>
                <span class="nv">FontAttributes</span><span class="o">=</span><span class="s2">"Bold"</span>
                SemanticProperties.Hint<span class="o">=</span><span class="s2">"Click to authenticate with your fingerprint"</span>
                <span class="nv">Clicked</span><span class="o">=</span><span class="s2">"OnBiometricClicked"</span>
                <span class="nv">HorizontalOptions</span><span class="o">=</span><span class="s2">"Center"</span> /&gt;

</code></pre></div></div>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/03.png" alt="image" /></p>

<p>A continuaci√≥n debemos de a√±adir el using correspondiente:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
using Plugin.Fingerprint.Abstractions<span class="p">;</span>

</code></pre></div></div>

<p>Posteriormente declarar la interface IFingerprint:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
private <span class="nb">readonly </span>IFingerprint fingerprint<span class="p">;</span>

</code></pre></div></div>

<p>Misma que se pasara como par√°metro:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
public MainPage<span class="o">(</span>IFingerprint fingerprint<span class="o">)</span>

</code></pre></div></div>

<p>Y que declararemos dentro del MainPage:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
	InitializeComponent<span class="o">()</span><span class="p">;</span>
	this.fingerprint <span class="o">=</span> fingerprint<span class="p">;</span>

</code></pre></div></div>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/05.png" alt="image" /></p>

<p>Ahora, dentro del controlador de eventos ‚ÄúOnBiometricClicked‚Äù, en el c√≥digo subyacente a√±adamos el siguiente c√≥digo, el cual cuando haga clic en el bot√≥n, se le pedir√° que se autentique mediante huella digital:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
private async void OnBiometricClicked<span class="o">(</span>object sender, EventArgs e<span class="o">)</span>
	<span class="o">{</span>
		var request <span class="o">=</span> new AuthenticationRequestConfiguration<span class="o">(</span><span class="s2">"Validate that you have fingers"</span>, <span class="s2">"Because without them you will not be able to access"</span><span class="o">)</span><span class="p">;</span>
		var result <span class="o">=</span> await fingerprint.AuthenticateAsync<span class="o">(</span>request<span class="o">)</span><span class="p">;</span>
		<span class="k">if</span> <span class="o">(</span>result.Authenticated<span class="o">)</span>
		<span class="o">{</span>
			await DisplayAlert<span class="o">(</span><span class="s2">"Authenticate!"</span>, <span class="s2">"Access Granted"</span>, <span class="s2">"OK"</span><span class="o">)</span><span class="p">;</span>
		<span class="o">}</span>
		<span class="k">else</span>
		<span class="o">{</span>
			await DisplayAlert<span class="o">(</span><span class="s2">"Unauthenticated"</span>, <span class="s2">"Access Denied"</span>, <span class="s2">"OK"</span><span class="o">)</span><span class="p">;</span>
		<span class="o">}</span>
	<span class="o">}</span>

</code></pre></div></div>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/04.png" alt="image" /></p>

<h2 id="resultado--salida">Resultado / Salida</h2>

<table>
  <tbody>
    <tr>
      <td>Android</td>
    </tr>
  </tbody>
</table>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/06.png" alt="image" /></p>

<p><img src="/assets/img/blog/tutorials/maui-biometrics/07.png" alt="image" /></p>

<p>Como siempre, a continuaci√≥n proporciono un ejemplo de c√≥digo en mi <a href="https://github.com/LucioMSP/biometricMAUI">GitHub</a>, mismo que puedes consultar si lo deseas.</p>

<h2 id="conclusi√≥n">Conclusi√≥n</h2>

<p>Y esto concluye el temporizador del bot√≥n de cuenta regresiva. Como puede ver, dibujar botones redondos fue bastante sencillo. Dibujar el c√≠rculo fue un poco m√°s complicado, pero tambi√©n mostr√≥ que se pod√≠a crear una forma diferente usando .NET MAUI Graphics. Aseg√∫rese de consultar los documentos para ver todo el potencial de esta biblioteca, ya que obtendr√° estos beneficios listos para usar con .NET MAUI.</p>

<p>Espero que este peque√±o art√≠culo te haya brindado suficiente informaci√≥n para aplicar dicho control en sus aplicaciones .NET MAUI y ver los resultados esperados.</p>

<p>Aprovecho el espacio para invitarte a dejar un comentario si deseas que d√© m√°s detalles sobre cualquier cosa dentro de este art√≠culo.</p>

<p>Recuerda que puedes encontrar una peque√±a aplicaci√≥n de muestra en mi repositorio de GitHub. Y no se olvide de buscar publicaciones existentes y otras publicaciones de julio de UI en todo el atractivo visual de .NET MAUI.</p>

<p>M√°s informaci√≥n:</p>

<ul>
  <li>
    <p>Articulo original por <a href="https://mallibone.com/post/dotnetmaui-countdown-button">Mark¬¥s Blog (versi√≥n en Ingles)</a></p>
  </li>
  <li>
    <p>GitHub Xamarin-Fingerprint: <a href="https://github.com/smstuebe/xamarin-fingerprint/tree/maui-support">https://github.com/smstuebe/xamarin-fingerprint/tree/maui-support</a></p>
  </li>
</ul>

<h2 id="happy-coding">¬°Happy Coding!</h2>

  
</article>
:ET